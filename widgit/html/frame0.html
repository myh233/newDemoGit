<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>首页</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
    <style>
        #photo{
          width:100%;
          height:180px;
        }
        #mid{
          padding:5px;
          border:1px solid #8a8a8a;
          font-size:15px;
          color:#828282;
        }
        #bt1{
          text-align:center;
          margin:0 auto;
          position:absolute;
          top:214px;
          width:50%;
          height:79px;
          border:0.5px solid #8a8a8a;
          background-color: #cdcdcd;
        }
        #bt2{
          text-align:center;
          margin:0 auto;
          position:absolute;
    			left:182px;
    			top:214px;
          height:79px;
    			width:49%;
    			border:0.5px solid #8a8a8a;
          background-color: #cdcdcd;
        }
        #bt3{
          text-align:center;
          margin:0 auto;
          position:absolute;
          top:295px;
          width:50%;
          height:79px;
          border:0.5px solid #8a8a8a;
          background-color: #cdcdcd;
        }
        #bt4{
          text-align:center;
          margin:0 auto;
          position:absolute;
    			left:182px;
    			top:295px;
          height:79px;
    			width:176px;
          border:0.5px solid #8a8a8a;
          background-color: #cdcdcd;
        }
        #bt5{
          text-align:center;
          margin:0 auto;
          position:absolute;
    			left:182px;
    			top:376px;
          height:79px;
    			width:176px;
          border:0.5px solid #8a8a8a;
          background-color: #cdcdcd;
        }
        #div1{
          margin-top: 5px;
        }
    </style>
</head>
<body>
    <div id = "photo"><img src="../image/photo.jpg" height="100%" width="100%"/></div>
    <div id="mid">日常功能</div>
    <div class="fction">
      <div id="bt1" onclick="identifyIDFace();reloadPage();">
        <div id="div1">
          <img src="../image/idcard.png" />
          <p>身份证正面识别</p>
        </div>
      </div>
      <div id="bt2" onclick="identifyIDBack();reloadPage();">
        <div id="div1">
          <img src="../image/idcard.png"/>
          <p>身份证背面识别</p>
        </div>
      </div>
      <div id="bt3" onclick="generalAccurateBasicOCR();reloadPage();">
        <div id="div1">
          <img src="../image/licenceplateOCR.png"/>
          <p>车牌识别</p>
        </div>
      </div>
      <div id="bt4" onclick="drivingLicenseOCR();reloadPage();">
        <div id="div1">
          <img src="../image/drivingLicenseOCR.png"/>
          <p>驾驶证识别</p>
        </div>
      </div>
      <div id="bt5" onclick="loadPosition();reloadPage();">
        <div id="div1">
          <img src="../image/drivingLicenseOCR.png"/>
          <p>单次地址</p>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="../script/api.js"></script>
    <script>
        function sliding() {  //点击滑到左侧页面
            api.openSlidPane({type: 'left'});
        }
        apiready = function () {
    	    $api.fixStatusBar($api.dom('.header'));
            api.addEventListener({
                name: 'keyback'
            }, function(ret, err){
                api.closeWidget();
            });
    	};
    </script>
    <script type="text/javascript">
        apiready = function() {
            bdInit();
        };

        function reloadPage()
        {
          window.location.reload()
        }

        //身份识别初始化
        function bdInit() {
          var baiduAd = api.require('baiduIdentifyOCR');
          baiduAd.init(function(ret,err){
              //alert(JSON.stringify(ret));
          });
        }

        //身份证正面识别
        function identifyIDFace() {
          reloadPage();
          var username = localStorage.getItem("usna");
          if(username){
            var baiduAd = api.require('baiduIdentifyOCR');
            baiduAd.identifyIDFace(function(ret) {
                alert(JSON.stringify(ret));
            });
          }
          else{
            alert("请先登录");
          }
        }
        //身份证背面识别
        function identifyIDBack() {
          reloadPage();
          var username = localStorage.getItem("usna");
          if(username){
            var baiduAd = api.require('baiduIdentifyOCR');
            baiduAd.identifyIDBack(function(ret) {
                alert(JSON.stringify(ret));
            });
          }
          else{
            alert("请先登录");
          }
        }
        //通用文字识别
        function generalAccurateBasicOCR() {
          reloadPage();
          var username = localStorage.getItem("usna");
          if(username){
            var baiduAd = api.require('baiduIdentifyOCR');
            baiduAd.generalAccurateBasicOCR(function(ret) {
                alert(JSON.stringify(ret));
            });
          }
          else{
            alert("请先登录");
          }
        }
        //驾驶证识别
        function drivingLicenseOCR(){
          reloadPage();
          var username = localStorage.getItem("usna");
          if(username){
            var baiduAd = api.require('baiduIdentifyOCR');
            baiduAd.drivingLicenseOCR(function(ret){
               alert(JSON.stringify(ret));
            });
          }
          else{
            alert("请先登录");
          }
       }


       //定位功能实现
       function configManager(){ //配置定位信息
         var aMapLBS = api.require('aMapLBS');
         aMapLBS.configManager({
            accuracy: 'hundredMeters',
            filter: 1
         }, function(ret, err) {
            if (ret.status) {
                alert('定位管理器初始化成功！');
            }
         });
       }

       //单次地理定位
       function singleLocation(){
         var aMapLBS = api.require('aMapLBS');
         aMapLBS.singleLocation({
            timeout: 10
         }, function(ret, err) {
            if (ret.status) {
               alert(JSON.stringify(ret));
            }
         });
       }
       function loadPosition(){
        	var aMapLBS = api.require('aMapLBS');//引入模块
        	//配置定位信息
        	aMapLBS.configManager({
        	    accuracy: 'hundredMeters',
        	    filter: 1
        	}, function(ret, err) {
        	    if (ret.status) {
        			//先取消其他定位
        			aMapLBS.stopUpdatingLocation();
        			//先定位经纬度
        			aMapLBS.singleLocation({
    	            timeout: 10
              },function(ret,err){
                  if (ret.status) {
        				     alert(JSON.stringify(ret));
        				     alert("经度："+ret.lon+"\n纬度："+ret.lat);
        				   	 //$("#longitude").val(ret.lon);
        				   	 //$("#latitude").val(ret.lat);
        		   			 //直接定位地址
        					   /*aMapLBS.singleAddress({
        					   timeout: 10
        					   }, function(ret2, err2) {
        					        if (ret2.status) {
            					        alert(JSON.stringify(ret2));//获取所属兴趣点名称
            					        var address = ret2.address.AOIName;
            					        $("#position").text(ret2.address.AOIName);
        					        }
        					  });*/
        				}
                });
        	    }
        	});
        }
    </script>
</body>
</html>
